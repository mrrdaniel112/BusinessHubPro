@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
    /* Prevent scrollbar jump on iOS Safari */
    -webkit-overflow-scrolling: touch;
    /* Prevent text size adjustment on orientation change in iOS */
    -webkit-text-size-adjust: 100%;
    /* Better touch experience */
    touch-action: manipulation;
    /* Prevent pinch zoom on mobile devices */
    max-width: 100%;
    overflow-x: hidden;
  }
  
  /* Improve font rendering on mobile */
  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

@layer utilities {
  /* Utilities for safe area padding (iOS) */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }
  
  .pt-safe {
    padding-top: env(safe-area-inset-top, 0px);
  }
  
  .pl-safe {
    padding-left: env(safe-area-inset-left, 0px);
  }
  
  .pr-safe {
    padding-right: env(safe-area-inset-right, 0px);
  }
  
  /* Safe area margin utilities */
  .mb-safe {
    margin-bottom: env(safe-area-inset-bottom, 0px);
  }
  
  .mt-safe {
    margin-top: env(safe-area-inset-top, 0px);
  }
  
  /* Improved input styling for mobile */
  input, textarea, button, select {
    -webkit-appearance: none;
    appearance: none;
    font-size: 16px; /* Prevents iOS zoom on focus */
  }
  
  /* Fix for button and input borders on iOS */
  button, input, textarea, select {
    border-radius: 0.25rem; /* Restore rounded corners */
  }
  
  /* Remove tap highlight on Android */
  * {
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Better touch targets for mobile */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Mobile-specific text adjustments */
  .mobile-text-adjust {
    text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
  }
}

/* Mobile optimization classes */
/* Fix for iOS scrolling momentum issues */
.overflow-y-auto, .overflow-auto {
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin; /* For Firefox */
}

/* Fix for mobile 100vh issue */
:root {
  --vh: 1vh; /* Will be set by JavaScript */
}

.h-screen {
  height: 100vh; /* Fallback */
  height: 100dvh; /* Dynamic viewport height */
  height: calc(var(--vh, 1vh) * 100); /* Custom calculation for iOS */
}

.w-screen {
  width: 100vw; /* Fallback */
  width: 100dvw; /* Dynamic viewport width */
}

/* Min height using dynamic viewport units */
.min-h-screen {
  min-height: 100vh; /* Fallback */
  min-height: 100dvh; /* Dynamic viewport height */
  min-height: calc(var(--vh, 1vh) * 100); /* Custom calculation for iOS */
}

/* Height using percentages of viewport height */
.h-90vh {
  height: 90vh;
  height: 90dvh;
  height: calc(var(--vh, 1vh) * 90);
}

.h-80vh {
  height: 80vh;
  height: 80dvh;
  height: calc(var(--vh, 1vh) * 80);
}

.h-70vh {
  height: 70vh;
  height: 70dvh;
  height: calc(var(--vh, 1vh) * 70);
}

/* Fixed positioning that respects safe areas */
.fixed-safe-bottom {
  position: fixed;
  bottom: 0;
  bottom: env(safe-area-inset-bottom, 0px);
  left: 0;
  right: 0;
}

/* Orientation-specific styles */
@media screen and (orientation: portrait) {
  .portrait-only {
    display: block;
  }
  .landscape-only {
    display: none;
  }
}

@media screen and (orientation: landscape) {
  .portrait-only {
    display: none;
  }
  .landscape-only {
    display: block;
  }
}

/* iOS specific fixes */
@supports (-webkit-touch-callout: none) {
  /* iOS-specific styles */
  .ios-specific {
    /* iOS Safari padding fix */
    padding-bottom: env(safe-area-inset-bottom, 20px);
  }
  
  /* Prevent overscroll bounce effect on iOS */
  .prevent-overscroll {
    height: 100%;
    overflow: hidden;
    position: fixed;
    width: 100%;
  }
}

/* Android Chrome specific fixes */
@supports not (-webkit-touch-callout: none) {
  /* Android-specific styles */
  .android-specific {
    /* Android-specific adjustments if needed */
  }
}